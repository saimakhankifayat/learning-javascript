<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Saima Professional Chat Messenger</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #e6f0fa, #f8fafc);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    .chat-container {
      width: 680px;
      max-width: 95vw;
      height: 85vh;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      border: 1px solid #e2e8f0;
    }

    .chat-header {
      text-align: center;
      padding: 16px;
      font-size: 1.5rem;
      color: #1e293b;
      background: #f8fafc;
      border-bottom: 1px solid #e2e8f0;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .chat-history {
      flex: 1;
      padding: 24px;
      overflow-y: auto;
      color: #1e293b;
      font-size: 1rem;
      display: flex;
      flex-direction: column;
      scroll-behavior: smooth;
    }

    .chat-history::-webkit-scrollbar {
      width: 6px;
    }

    .chat-history::-webkit-scrollbar-thumb {
      background: #94a3b8;
      border-radius: 3px;
    }

    .chat-input-area {
      padding: 16px;
      display: flex;
      gap: 12px;
      background: #f8fafc;
      border-top: 1px solid #e2e8f0;
      align-items: center;
    }

    .chat-input-area input[type="text"] {
      flex: 1;
      padding: 12px 16px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      background: #ffffff;
      color: #1e293b;
      font-size: 1rem;
      outline: none;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    .chat-input-area input[type="text"]:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .chat-input-area input[type="text"]::placeholder {
      color: #94a3b8;
    }

    .chat-input-area button {
      padding: 12px 20px;
      background-color: #3b82f6;
      color: #ffffff;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s ease, transform 0.1s ease;
    }

    .chat-input-area button:hover {
      background-color: #2563eb;
      transform: translateY(-1px);
    }

    .chat-input-area button:active {
      transform: translateY(0);
    }

    .emoji-picker {
      position: relative;
    }

    .emoji-button {
      padding: 8px;
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.2rem;
    }

    .emoji-list {
      display: none;
      position: absolute;
      bottom: 50px;
      left: 0;
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      z-index: 10;
    }

    .emoji-list.active {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
    }

    .emoji-list span {
      padding: 6px;
      font-size: 1.2rem;
      cursor: pointer;
      border-radius: 4px;
      transition: background-color 0.2s ease;
    }

    .emoji-list span:hover {
      background-color: #f1f5f9;
    }

    .chat-bubble {
      padding: 12px 16px;
      border-radius: 12px;
      margin-bottom: 12px;
      width: fit-content;
      max-width: 75%;
      line-height: 1.6;
      font-size: 0.95rem;
    }

    .chat-bubble.bot {
      align-self: flex-start;
      background-color: #f1f5f9;
      color: #1e293b;
      border-top-left-radius: 0;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    }

    .chat-bubble.user {
      align-self: flex-end;
      background-color: #3b82f6;
      color: #ffffff;
      border-top-right-radius: 0;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    }

    @media (max-width: 600px) {
      .chat-container {
        height: 100vh;
        width: 100%;
        border-radius: 0;
      }

      .chat-input-area {
        flex-wrap: wrap;
      }

      .chat-input-area input[type="text"] {
        margin-bottom: 12px;
      }
    }
  </style>
</head>

<body>
  <div class="chat-container">
    <div class="chat-header" id="chatHeader">Saima AI Assistant</div>
    <div class="chat-history" id="chatHistory">
      <div class="chat-bubble bot">Hello! I'm Saima AI, your intelligent assistant. How can I help you today? ğŸŒŸ</div>
      <div class="chat-bubble bot">Try asking a question or type a math equation like 2+2! ğŸ§®</div>
    </div>
    <form class="chat-input-area" action="#" method="post" name="chatInputArea" id="chatInputArea">
      <div class="emoji-picker">
        <button type="button" class="emoji-button" onclick="toggleEmojiPicker()">ğŸ˜Š</button>
        <div class="emoji-list" id="emojiList">
          <span onclick="addEmoji('ğŸ˜Š')">ğŸ˜Š</span>
          <span onclick="addEmoji('â¤ï¸')">â¤ï¸</span>
          <span onclick="addEmoji('ğŸ‘')">ğŸ‘</span>
          <span onclick="addEmoji('ğŸŒŸ')">ğŸŒŸ</span>
          <span onclick="addEmoji('ğŸ‰')">ğŸ‰</span>
          <span onclick="addEmoji('ğŸš€')">ğŸš€</span>
          <span onclick="addEmoji('ğŸ˜')">ğŸ˜</span>
          <span onclick="addEmoji('ğŸ™Œ')">ğŸ™Œ</span>
          <span onclick="addEmoji('ğŸ”¥')">ğŸ”¥</span>
          <span onclick="addEmoji('ğŸ’¡')">ğŸ’¡</span>
        </div>
      </div>
      <input type="text" placeholder="Type your message or math equation..." name="message" required id="message">
      <button type="button" onclick="sendMessage()">Send</button>
    </form>
  </div>

  <script>
    // Define Global Variables
    const SpecialUserName = "saima";
    let IsLastMessageContainsSpecialUserName = false;

    // Predefined AI-like responses
    const botResponses = [
      "That's an interesting question! Could you elaborate a bit? ğŸ¤”",
      "I'm here to help! What's on your mind? ğŸš€",
      "Great to hear from you! How can I assist you further? ğŸ˜Š",
      "Did you know I can solve math equations? Try something like 2+2! ğŸ§®",
      "Hmm, let me think about that... Any more details you can share? ğŸ’¡",
      "You're curious today! What's the next topic? ğŸŒŸ",
      "I love a good conversation! What's up? ğŸ‰",
      "Need help with something specific? I'm all ears... or rather, all text! ğŸ˜",
	  "I Love My Father."
    ];

    // Toggle emoji picker visibility
    function toggleEmojiPicker() {
      const emojiList = document.getElementById("emojiList");
      emojiList.classList.toggle("active");
    }

    // Add selected emoji to input field
    function addEmoji(emoji) {
      const input = document.getElementById("message");
      input.value += emoji;
	 // input.value= input.value + emoji;
      input.focus();
      toggleEmojiPicker();
    }

    // Check if the message is a valid math expression
    function isMathExpression(message) {
      // Allow numbers, basic operators, and parentheses
      const mathRegex = /^[0-9+\-*/().\s]+$/;
      return mathRegex.test(message);
    }

    // Evaluate math expression safely
    function evaluateMathExpression(expression) {
      try {
        // Ensure the expression only contains valid math characters
        if (isMathExpression(expression)) {
          return eval(expression); // Using eval for simplicity in this learning project
        }
        return null;
      } catch (error) {
        console.error("Math evaluation error:", error);
        return null;
      }
    }

    // Send a message from the user to the chat history
    function sendMessage(myMessage = "") {
      const newFormatedMessage = "";
      const oldMessages = document.getElementById("chatHistory").innerHTML;
      const newMessage = myMessage || document.getElementById("message").value;
      let allMessages = "";

      if (newMessage.trim().length === 0) {
        playBeep();
        return;
      } else if (newMessage.toLowerCase().trim() === SpecialUserName) {
        // Special greeting for the user
        allMessages = oldMessages + `<div class="chat-bubble user">${newMessage}</div>`;
        document.getElementById("chatHistory").innerHTML = allMessages;
        playBeep();
        document.getElementById("message").value = "";
        scrollToBottom();
        setTimeout(() => {
          recieveMessage(`Welcome back, ${SpecialUserName}! â¤ï¸ It's wonderful to see you!`);
        }, 500);
        return;
      } else if (newMessage.toLowerCase().indexOf(SpecialUserName) !== -1) {
        allMessages = oldMessages + `<div class="chat-bubble user">â¤ï¸ ${newMessage} â¤ï¸</div>`;
        IsLastMessageContainsSpecialUserName = true;
      } else {
        allMessages = oldMessages + `<div class="chat-bubble user">${newMessage}</div>`;
      }

      document.getElementById("chatHistory").innerHTML = allMessages;
      playBeep();
      document.getElementById("message").value = "";
      scrollToBottom();

      // Process bot response
      setTimeout(() => {
        // Check if the message is a math expression
        const mathResult = evaluateMathExpression(newMessage.trim());
        if (mathResult !== null) {
          recieveMessage(`Your answer is ${mathResult}! ğŸ§® Try another equation!`);
        } else {
          // Select a random predefined response
         // const randomResponse = botResponses[Math.floor(Math.random() * botResponses.length)];
		 const randomNumber = Math.floor(Math.random()* botResponses.length ) ;
          randomResponse= botResponses[randomNumber];
          recieveMessage(randomResponse);
        }
      }, 500);
    }

    // Receive a message from the bot to the chat history
    function recieveMessage(myMessage = "") {
      let oldMessages = document.getElementById("chatHistory").innerHTML;
      let newFormatedMessage = "";
      let allMessages = "";
      if (IsLastMessageContainsSpecialUserName) {
        myMessage = `â¤ï¸ ${myMessage} â¤ï¸`;
        IsLastMessageContainsSpecialUserName = false;
      }
      newFormatedMessage = `<div class="chat-bubble bot">${myMessage}</div>`;
      
      allMessages = oldMessages + newFormatedMessage;
      document.getElementById("chatHistory").innerHTML = allMessages;
      playBeep();
      scrollToBottom();
    }

    // Play a beep sound when a message is sent or received
    function playBeep() {
      const beep = new Audio('beep.mp3');
      beep.play().catch(error => {
        console.error("Audio playback failed:", error);
      });
    }

    // Scroll the chat history to the bottom
    function scrollToBottom() {
      const chatHistory = document.getElementById("chatHistory");
      chatHistory.scrollTop = chatHistory.scrollHeight;
    }

    // Close emoji picker when clicking outside
    document.addEventListener('click', (event) => {
      const emojiPicker = document.querySelector('.emoji-picker');
      if (!emojiPicker.contains(event.target)) {
        document.getElementById("emojiList").classList.remove("active");
      }
    });

    // Add Enter key event listener to send message
    document.getElementById("message").addEventListener('keydown', (event) => {
      if (event.key === 'Enter') {
        event.preventDefault(); // Prevent form submission or newline
        sendMessage();
      }
    });
  </script>
</body>

</html>